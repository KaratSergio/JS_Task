{"mappings":"C,A,WCAA,IAAM,EAAO,CACX,UAAW,SAAS,aAAa,CAAC,kBAClC,YAAa,SAAS,aAAa,CAAC,iBACtC,EAEM,EAAU,CACd,eAAgB,kBAClB,EAEI,EAAO,EAgBX,SAAS,EAAe,CAAK,EAC3B,GAAQ,EACR,EAAK,WAAW,CAAC,QAAQ,CAAG,CAAA,EAC5B,EAAc,GACX,IAAI,CAAC,AAAA,IAKJ,GAJA,EAAK,SAAS,CAAC,kBAAkB,CAC/B,YACA,EAAa,EAAK,OAAO,GAEvB,EAAK,IAAI,EAAI,IAAK,CACpB,EAAK,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,EAAQ,cAAc,EACrD,EAAK,WAAW,CAAC,mBAAmB,CAAC,QAAS,GAC9C,MACF,CACA,EAAK,WAAW,CAAC,QAAQ,CAAG,CAAA,CAC9B,GACC,KAAK,CAAC,AAAA,IACL,QAAQ,GAAG,CAAC,EACd,EACJ,CAEA,SAAS,EAAc,EAAO,CAAC,EAK7B,IAAM,EAAS,IAAI,gBAAgB,CACjC,QAHc,mCAId,KAAA,CACF,GACA,OAAO,MAAM,oDAA4B,GAAQ,EAAE,IAAI,CAAC,AAAA,IACtD,GAAI,CAAC,EAAK,EAAE,CACV,MAAM,AAAI,MAAM,EAAK,UAAU,EAEjC,OAAO,EAAK,IAAI,EAClB,EACF,CAEA,SAAS,EAAa,CAAG,EACvB,OAAO,EACJ,GAAG,CACF,CAAC,CAAA,YACC,CAAW,CAAA,MACX,CAAK,CAAA,aACL,CAAY,CAAA,aACZ,CAAY,CACb,GAAK,CAAC;8CACiC,EAAE,EAAY,OAAO,EAAE,EAAM;;QAEnE,EAAE,EAAM;qBACK,EAAE,EAAa;qBACf,EAAE,EAAa;;;SAG3B,CAAC,EAEL,IAAI,CAAC,GACV,CAvEA,IACG,IAAI,CAAC,AAAA,IACJ,EAAK,SAAS,CAAC,SAAS,CAAG,EAAa,EAAK,OAAO,EAEhD,EAAK,IAAI,CAAG,EAAK,WAAW,EAAI,EAAK,IAAI,CAAG,MAC9C,EAAK,WAAW,CAAC,SAAS,CAAC,MAAM,CAAC,EAAQ,cAAc,EACxD,EAAK,WAAW,CAAC,gBAAgB,CAAC,QAAS,IAE7C,QAAQ,GAAG,CAAC,EACd,GACC,KAAK,CAAC,AAAA,IACL,QAAQ,GAAG,CAAC,EACd,E,G,mE","sources":["<anon>","src/js/07-movie-api.js"],"sourcesContent":["(function () {\nvar $5d80081fb52896eb$exports = {};\nconst $5d80081fb52896eb$var$refs = {\n    movieList: document.querySelector(\".js-movie-list\"),\n    loadMoreBtn: document.querySelector(\".js-load-more \")\n};\nconst $5d80081fb52896eb$var$classes = {\n    loadMoreHidden: \"load-more-hidden\"\n};\nlet $5d80081fb52896eb$var$page = 1;\n$5d80081fb52896eb$var$serviceMovies().then((data)=>{\n    $5d80081fb52896eb$var$refs.movieList.innerHTML = $5d80081fb52896eb$var$createMarkup(data.results);\n    if (data.page < data.total_pages && data.page < 500) {\n        $5d80081fb52896eb$var$refs.loadMoreBtn.classList.remove($5d80081fb52896eb$var$classes.loadMoreHidden);\n        $5d80081fb52896eb$var$refs.loadMoreBtn.addEventListener(\"click\", $5d80081fb52896eb$var$handleLoadMore);\n    }\n    console.log(data);\n}).catch((err)=>{\n    console.log(err);\n});\nfunction $5d80081fb52896eb$var$handleLoadMore(event) {\n    $5d80081fb52896eb$var$page += 1;\n    $5d80081fb52896eb$var$refs.loadMoreBtn.disabled = true;\n    $5d80081fb52896eb$var$serviceMovies($5d80081fb52896eb$var$page).then((data)=>{\n        $5d80081fb52896eb$var$refs.movieList.insertAdjacentHTML(\"beforeend\", $5d80081fb52896eb$var$createMarkup(data.results));\n        if (data.page >= 500) {\n            $5d80081fb52896eb$var$refs.loadMoreBtn.classList.add($5d80081fb52896eb$var$classes.loadMoreHidden);\n            $5d80081fb52896eb$var$refs.loadMoreBtn.removeEventListener(\"click\", $5d80081fb52896eb$var$handleLoadMore);\n            return;\n        }\n        $5d80081fb52896eb$var$refs.loadMoreBtn.disabled = false;\n    }).catch((err)=>{\n        console.log(err);\n    });\n}\nfunction $5d80081fb52896eb$var$serviceMovies(page = 1) {\n    const BASE_URL = \"https://api.themoviedb.org/3\";\n    const END_POINT = \"trending/movie/week\";\n    const API_KEY = \"6167a2fbe619d64566c427d4bc6ed1cb\";\n    const params = new URLSearchParams({\n        api_key: API_KEY,\n        page: page\n    });\n    return fetch(`${BASE_URL}/${END_POINT}?${params}`).then((resp)=>{\n        if (!resp.ok) throw new Error(resp.statusText);\n        return resp.json();\n    });\n}\nfunction $5d80081fb52896eb$var$createMarkup(arr) {\n    return arr.map(({ poster_path: poster_path, title: title, vote_average: vote_average, release_date: release_date })=>`<li class\"movie-card\">\n    <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${title}\">\n    <div class=\"movie-info\">\n    <h2>${title}</h2>\n    <p>Release date: ${release_date}</p>\n    <p>Vote average: ${vote_average}</p></p>\n    </div>\n    \n    </li>`).join(\"\");\n}\n\n})();\n//# sourceMappingURL=07-movie-api.14d806c8.js.map\n","const refs = {\n  movieList: document.querySelector('.js-movie-list'),\n  loadMoreBtn: document.querySelector('.js-load-more '),\n};\n\nconst classes = {\n  loadMoreHidden: 'load-more-hidden',\n};\n\nlet page = 1;\n\nserviceMovies()\n  .then(data => {\n    refs.movieList.innerHTML = createMarkup(data.results);\n\n    if (data.page < data.total_pages && data.page < 500) {\n      refs.loadMoreBtn.classList.remove(classes.loadMoreHidden);\n      refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n    }\n    console.log(data);\n  })\n  .catch(err => {\n    console.log(err);\n  });\n\nfunction handleLoadMore(event) {\n  page += 1;\n  refs.loadMoreBtn.disabled = true;\n  serviceMovies(page)\n    .then(data => {\n      refs.movieList.insertAdjacentHTML(\n        'beforeend',\n        createMarkup(data.results)\n      );\n      if (data.page >= 500) {\n        refs.loadMoreBtn.classList.add(classes.loadMoreHidden);\n        refs.loadMoreBtn.removeEventListener('click', handleLoadMore);\n        return;\n      }\n      refs.loadMoreBtn.disabled = false;\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\nfunction serviceMovies(page = 1) {\n  const BASE_URL = 'https://api.themoviedb.org/3';\n  const END_POINT = 'trending/movie/week';\n  const API_KEY = '6167a2fbe619d64566c427d4bc6ed1cb';\n\n  const params = new URLSearchParams({\n    api_key: API_KEY,\n    page,\n  });\n  return fetch(`${BASE_URL}/${END_POINT}?${params}`).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        poster_path,\n        title,\n        vote_average,\n        release_date,\n      }) => `<li class\"movie-card\">\n    <img src=\"https://image.tmdb.org/t/p/w500/${poster_path}\" alt=\"${title}\">\n    <div class=\"movie-info\">\n    <h2>${title}</h2>\n    <p>Release date: ${release_date}</p>\n    <p>Vote average: ${vote_average}</p></p>\n    </div>\n    \n    </li>`\n    )\n    .join('');\n}\n"],"names":["$5d80081fb52896eb$var$refs","movieList","document","querySelector","loadMoreBtn","$5d80081fb52896eb$var$classes","loadMoreHidden","$5d80081fb52896eb$var$page","$5d80081fb52896eb$var$handleLoadMore","event","disabled","$5d80081fb52896eb$var$serviceMovies","then","data","insertAdjacentHTML","$5d80081fb52896eb$var$createMarkup","results","page","classList","add","removeEventListener","catch","err","console","log","params","URLSearchParams","api_key","fetch","resp","ok","Error","statusText","json","arr","map","poster_path","title","vote_average","release_date","join","innerHTML","total_pages","remove","addEventListener"],"version":3,"file":"07-movie-api.14d806c8.js.map"}